(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a2d93ae"],{6795:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"",wrap:"","fill-height":""}},[s("v-flex",{attrs:{xs12:"","v-if":null!=t.sensor}},[s("h1",{staticClass:"font-weight-light display-3 text-xs-center"},[t._v("\n      Sensor Name: "+t._s(t.sensor.name)+"\n      "),s("br")]),s("h1",{staticClass:"font-weight-light display-3 text-xs-center"},[t._v("Register: "+t._s(t.sensor.register))]),s("h1",{staticClass:"font-weight-light display-3 text-xs-center"},[t._v("Unit description : "+t._s(t.sensor.unitdesd))]),s("h1",{staticClass:"font-weight-light display-3 text-xs-center"},[t._v("Owner : "+t._s(t.owner))]),s("v-divider"),s("br"),s("br"),s("br"),t.hasRead?s("v-flex",{attrs:{xs12:"","text-xs-center":""}},[s("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"text-xs-center font-weight-light display-3 blue--text font-weight-black"},[t._v("MIN")])]),s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"font-weight-light display-3 text-center font-weight-black"},[t._v("AVG")])]),s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"font-weight-light display-3 red--text darken-4 text-center font-weight-black"},[t._v("MAX")])])],1)],1):t._e(),t.hasRead?s("v-flex",{attrs:{xs12:"","text-xs-center":""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"font-weight-light display-4 blue--text"},[t._v("\n            "+t._s(t.min)+"\n            "),s("span",{staticClass:"display-1 blue--text"},[t._v(t._s(t.sensor.unit))])])]),s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"font-weight-light display-4 text-center"},[t._v("\n            "+t._s(t.avg)+"\n            "),s("span",{staticClass:"display-1"},[t._v(t._s(t.sensor.unit))])])]),s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"font-weight-light display-4 red--text darken-4 text-center"},[t._v("\n            "+t._s(t.max)+"\n            "),s("span",{staticClass:"display-1 red--text darken-4"},[t._v(t._s(t.sensor.unit))])])])],1)],1):s("v-flex",{attrs:{xs12:""}},[s("h3",{staticClass:"font-weight-light display-3"},[t._v("The sensor has no reading for the time")])])],1),s("br"),s("br"),s("v-flex",{attrs:{xs10:"","offset-xs1":""}},[s("lineChart",{attrs:{id:"chart","chart-data":t.datacol,fontSize:40}}),s("v-spacer")],1),s("v-flex",{attrs:{xs12:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs3:""}},[s("v-img",{attrs:{src:a("f959")}})],1),s("v-flex",{attrs:{xs3:""}},[s("v-img",{attrs:{src:a("8534")}})],1),s("v-flex",{attrs:{xs3:""}},[s("v-img",{attrs:{src:a("c4c8")}})],1),s("v-flex",{attrs:{xs3:""}},[s("v-img",{attrs:{src:a("0975")}})],1)],1)],1)],1)},n=[],r=a("75fc"),i=a("768b"),o=(a("ffc1"),a("456d"),a("55dd"),a("ac6a"),a("28a5"),a("bd86")),l=a("cebc"),c=(a("7f7f"),a("96cf"),a("3b8d")),h=a("4a88"),u={data:function(){return{sensor:null,datacol:{},data:null,labels:null,max:null,min:null,avg:null,hasRead:!1,minlbl:null,maxlbl:null,owner:null,realdata:[],realdatamin:[],realdatamax:[],datamin:[],datamax:[]}},props:{name:String,time:String},methods:{getReading:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var a,s,n,c,h,u,d,g,f,x,p,v,m,b,w,y,k,M=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.realdata=[],this.realdatamin=[],this.realdatamax=[],this.datamin=[],this.datamax=[],a="/readSensor?name="+this.$options.propsData.name,"setup"!=e&&(a+="&datespan="+e),a=encodeURI(a),k.data.result.mock){t.next=16;break}return t.next=11,this.axios.get(a);case 11:n=t.sent,console.log("data result",n),s=n.data.result,t.next=21;break;case 16:return t.next=18,this.generatedatapack(e);case 18:s=t.sent,this.$store.dispatch("setMockData",s),console.log("Store",this.$store);case 21:if(c=[],h=[],u=0,sen.data.result.mock){t.next=31;break}return t.next=27,this.axios.get(a);case 27:n=t.sent,s=n.data.result,t.next=34;break;case 31:s=this.$store.state.a.mockdata,console.log("strore",this.$store),console.log(s);case 34:if(d=function(t){return function(e){return e.reduce(function(e,a){return Object(l["a"])({},e,Object(o["a"])({},a[t],(e[a[t]]||[]).concat(a)))},{})}},g=function(t,a){for(var n=d(t),o=n(s),l=function(t,e){var a=new Date,s=new Date,n=t.split("/"),r=e.split("/");return a.setDate(n[0]),a.setMonth(n[1]-1),s.setDate(r[0]),s.setMonth(r[1]-1),a-s},u=0,g=Object.entries(o);u<g.length;u++){var f=Object(i["a"])(g[u],2),x=f[0],p=f[1],v=[];p.forEach(function(t){v.push(parseFloat(t.value))});var m=v.reduce(function(t,e){return t+e});m/=p.length,M.realdata.push(m),M.realdatamin.push(Math.min.apply(Math,Object(r["a"])(v))),M.realdatamax.push(Math.max.apply(Math,Object(r["a"])(v)))}if("1d"==e)for(var b=0;b<24;b++)o.hasOwnProperty(b)||(o[b]=[{value:0}]);if("1w"==e){for(var w=0;w<7;w++){var y=new Date;y.setDate(y.getDate()-w),o.hasOwnProperty(y.getDate()+"/"+(y.getMonth()+1))||(o[y.getDate()+"/"+(y.getMonth()+1)]=[{value:0}])}var k=o;o={},Object.keys(k).sort(l).forEach(function(t){o[t]=k[t]})}if("1m"==e){for(var D=0;D<30;D++){y=new Date;y.setDate(y.getDate()-D),o.hasOwnProperty(y.getDate()+"/"+(y.getMonth()+1))||(o[y.getDate()+"/"+(y.getMonth()+1)]=[{value:0}])}k=o;o={},Object.keys(k).sort(l).forEach(function(t){o[t]=k[t]})}if("1y"==e)for(var _=0;_<12;_++)o.hasOwnProperty(_+1)||(o[_+1]=[{value:0}]);for(var O=0,C=Object.entries(o);O<C.length;O++){var j=Object(i["a"])(C[O],2);x=j[0],p=j[1],v=[];p.forEach(function(t){v.push(parseFloat(t.value))});m=v.reduce(function(t,e){return t+e});m/=p.length,a(x,m,c,h,p),M.datamin.push(Math.min.apply(Math,Object(r["a"])(v))),M.datamax.push(Math.max.apply(Math,Object(r["a"])(v)))}},s.forEach(function(t){var e=new Date(t.date);t.day=e.getDate()+"/"+(e.getMonth()+1),t.month=e.getMonth()+1,t.year=e.getFullYear(),t.hour=e.getHours()-3,t.minute=e.getMinutes(),t.second=e.getSeconds()}),0==s.length?this.hasRead=!1:this.hasRead=!0,"setup"==e)for(s.reverse(),f=s.length;u<10&&0!=f;f--,u++)x=s[f-1],c.push(parseFloat(x.value)),this.realdata.push(parseFloat(x.value)),p=new Date(x.date),h.push(p.getDate()+"/"+(p.getMonth()+1)+"/"+p.getFullYear());else"1d"==e?g("hour",function(t,e,a,s){a.push(e),s.push(t+"h")}):g("1w"==e||"1m"==e?"day":"month",function(t,e,a,s,n){a.push(e),s.push(t)});return this.data=c,this.labels=h,v=this.realdata.reduce(function(t,e){return t+e}),m=v/this.realdata.length,this.avg=Math.round(10*m)/10,this.min=Math.round(10*Math.min.apply(Math,Object(r["a"])(this.realdatamin)))/10,this.max=Math.round(10*Math.max.apply(Math,Object(r["a"])(this.realdatamax)))/10,t.next=48,this.axios.get("/getSensorInfo?name="+this.$options.propsData.name);case 48:return n=t.sent,b=n.data.result,p=new Date(b.register),w=p.getDate()+"/"+(p.getMonth()+1)+"/"+p.getFullYear(),b.register=w,this.sensor=b,this.datacol={labels:this.labels,datasets:[{label:"Avarage",backgroundColor:"rgba(0, 0, 0, 1)",borderColor:"rgba(0, 0, 0, 0.3)",data:this.data,fill:!1,stack:"1"},{label:"Maximum",backgroundColor:"rgba(255, 31, 31, 1)",borderColor:"rgba(255, 31, 31, 0.3)",data:this.datamax,fill:!1,stack:"1"},{label:"Minimum",backgroundColor:"rgba(31, 87, 255, 1)",borderColor:"rgba(31, 87, 255, 0.3)",data:this.datamin,fill:!1,stack:"1"}]},y=this,t.next=58,this.axios.get("/getAllSensors");case 58:k=t.sent,k.data.result.forEach(function(t){t.sensors.forEach(function(e){e.name==y.sensor.name&&(y.owner=t.name)})});case 60:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),generatedatapack:function(t){return new Promise(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(a,s){var n,r,i,o,l,c,h,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=[],r=new Date,i=new Date,o=0;case 4:if(!(o<12)){e.next=32;break}if(0!=o&&r.setMonth(r.getMonth()-1),"1d"!=t&&"1m"!=t&&"1w"!=t||(o=12),r.getFullYear()!=i.getFullYear()){e.next=29;break}l=new Date(r.getFullYear(),r.getMonth(),0).getDate(),"1w"==t&&(l=7),c=0;case 11:if(!(c<l)){e.next=29;break}0!=c&&(r.setDate(r.getDate()-1),r.setHours(0)),console.log("Date",r.getDate()),h=void 0,h=i.getHours()+1,"1d"==t&&(c=100),u=0;case 18:if(!(u<h)){e.next=26;break}return r.setHours(u+3),e.next=22,console.log("date",r.toISOString());case 22:n.push({date:r.toISOString(),value:20*Math.random()+10});case 23:u++,e.next=18;break;case 26:c++,e.next=11;break;case 29:o++,e.next=4;break;case 32:console.log("generated",n),a(n);case 34:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())}},mounted:function(){this.getReading(this.$options.propsData.time)},components:{lineChart:h["a"]}},d=u,g=(a("bf69"),a("2877")),f=a("6544"),x=a.n(f),p=a("ce7e6"),v=a("0e8f"),m=a("adda"),b=a("a722"),w=a("9910"),y=Object(g["a"])(d,s,n,!1,null,null,null);e["default"]=y.exports;x()(y,{VDivider:p["a"],VFlex:v["a"],VImg:m["a"],VLayout:b["a"],VSpacer:w["a"]})},bf69:function(t,e,a){"use strict";var s=a("dc6a"),n=a.n(s);n.a},dc6a:function(t,e,a){}}]);
//# sourceMappingURL=chunk-4a2d93ae.afaafe1b.js.map