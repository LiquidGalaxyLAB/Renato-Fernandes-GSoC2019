(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a2d93ae"],{6795:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("v-layout",{attrs:{row:"",wrap:"","fill-height":""}},[s("v-flex",{attrs:{xs12:"","v-if":null!=t.sensor}},[s("h1",{staticClass:"font-weight-light display-3 text-xs-center"},[t._v("\n      Sensor Name: "+t._s(t.sensor.name)+"\n      "),s("br")]),s("h1",{staticClass:"font-weight-light display-3 text-xs-center"},[t._v("Register: "+t._s(t.sensor.register))]),s("h1",{staticClass:"font-weight-light display-3 text-xs-center"},[t._v("Unit description : "+t._s(t.sensor.unitdesd))]),s("h1",{staticClass:"font-weight-light display-3 text-xs-center"},[t._v("Owner : "+t._s(t.owner))]),s("v-divider"),s("br"),s("br"),s("br"),t.hasRead?s("v-flex",{attrs:{xs12:"","text-xs-center":""}},[s("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"text-xs-center font-weight-light display-3 blue--text font-weight-black"},[t._v("MIN "+t._s(t.sensor.unit))])]),s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"font-weight-light display-3 text-center font-weight-black"},[t._v("AVG "+t._s(t.sensor.unit))])]),s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"font-weight-light display-3 red--text darken-4 text-center font-weight-black"},[t._v("MAX "+t._s(t.sensor.unit))])])],1)],1):t._e(),t.hasRead?s("v-flex",{attrs:{xs12:"","text-xs-center":""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"font-weight-light display-4 blue--text text-center"},[t._v(t._s(t.min)+" ")])]),s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"font-weight-light display-4 text-center"},[t._v(t._s(t.avg)+" ")])]),s("v-flex",{attrs:{xs4:""}},[s("h3",{staticClass:"font-weight-light display-4 red--text darken-4 text-center"},[t._v(t._s(t.max)+" ")])])],1)],1):s("v-flex",{attrs:{xs12:""}},[s("h3",{staticClass:"font-weight-light display-3"},[t._v("The sensor has no reading for the time")])])],1),s("br"),s("br"),s("v-flex",{attrs:{xs10:"","offset-xs1":""}},[s("lineChart",{attrs:{id:"chart","chart-data":t.datacol,fontSize:40}}),s("v-spacer")],1),s("v-flex",{attrs:{xs12:""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs3:""}},[s("v-img",{attrs:{src:e("f959")}})],1),s("v-flex",{attrs:{xs3:""}},[s("v-img",{attrs:{src:e("8534")}})],1),s("v-flex",{attrs:{xs3:""}},[s("v-img",{attrs:{src:e("c4c8")}})],1),s("v-flex",{attrs:{xs3:""}},[s("v-img",{attrs:{src:e("0975")}})],1)],1)],1)],1)},n=[],r=e("75fc"),l=e("768b"),o=(e("ffc1"),e("456d"),e("55dd"),e("ac6a"),e("28a5"),e("bd86")),i=e("cebc"),c=(e("7f7f"),e("4a88")),h={data:function(){return{sensor:null,datacol:{},data:null,labels:null,max:null,min:null,avg:null,hasRead:!1,minlbl:null,maxlbl:null,owner:null,realdata:[],realdatamin:[],realdatamax:[]}},props:{name:String,time:String},methods:{getReading:function(t){var a=this;this.realdata=[],this.realdatamin=[],this.realdatamax=[];var e="/readSensor?name="+this.$options.propsData.name;"setup"!=t&&(e+="&datespan="+t),e=encodeURI(e),console.log("datespan",t),this.axios.get(e).then(function(e){var s=[],n=[],c=e.data.result,h=0,u=function(t){return function(a){return a.reduce(function(a,e){return Object(i["a"])({},a,Object(o["a"])({},e[t],(a[e[t]]||[]).concat(e)))},{})}},g=function(e,o){for(var i=u(e),h=i(c),g=function(t,a){var e=new Date,s=new Date,n=t.split("/"),r=a.split("/");return e.setDate(n[0]),e.setMonth(n[1]-1),s.setDate(r[0]),s.setMonth(r[1]-1),e-s},d=0,f=Object.entries(h);d<f.length;d++){var v=Object(l["a"])(f[d],2),p=v[0],x=v[1];console.log("key",p," value",x);var b=[];x.forEach(function(t){b.push(parseFloat(t.value))});var m=b.reduce(function(t,a){return t+a});console.log(m),m/=x.length,console.log(m),a.realdata.push(m)}if("1d"==t){for(var w=0;w<24;w++)h.hasOwnProperty(w)||(h[w]=[{value:0}]);console.log(h)}if("1w"==t){for(var y=0;y<7;y++){var M=new Date;M.setDate(M.getDate()-y),console.log("data",M),h.hasOwnProperty(M.getDate()+"/"+(M.getMonth()+1))||(h[M.getDate()+"/"+(M.getMonth()+1)]=[{value:0}])}var D=h;h={},Object.keys(D).sort(g).forEach(function(t){h[t]=D[t]})}if("1m"==t){for(var _=0;_<30;_++){M=new Date;M.setDate(M.getDate()-_),console.log("data",M),h.hasOwnProperty(M.getDate()+"/"+(M.getMonth()+1))||(h[M.getDate()+"/"+(M.getMonth()+1)]=[{value:0}])}D=h;h={},Object.keys(D).sort(g).forEach(function(t){h[t]=D[t]})}if("1y"==t)for(var C=0;C<12;C++)h.hasOwnProperty(C+1)||(h[C+1]=[{value:0}]);console.log("sorted?",h);for(var k=0,O=Object.entries(h);k<O.length;k++){var j=Object(l["a"])(O[k],2);p=j[0],x=j[1];console.log("key",p," value",x);b=[];x.forEach(function(t){b.push(parseFloat(t.value))});m=b.reduce(function(t,a){return t+a});console.log(m),m/=x.length,console.log(m),o(p,m,s,n,x),a.realdatamin.push(Math.min.apply(Math,Object(r["a"])(b))),a.realdatamax.push(Math.max.apply(Math,Object(r["a"])(b)))}};if(c.forEach(function(t){var a=new Date(t.date);console.log(a),t.day=a.getDate()+"/"+(a.getMonth()+1),t.month=a.getMonth()+1,t.year=a.getFullYear(),t.hour=a.getHours()-3,t.minute=a.getMinutes(),t.second=a.getSeconds()}),0==c.length?a.hasRead=!1:a.hasRead=!0,"setup"==t){c.reverse();for(var d=c.length;h<10&&0!=d;d--,h++){var f=c[d-1];s.push(parseFloat(f.value)),a.realdata.push(parseFloat(f.value));var v=new Date(f.date);n.push(v.getDate()+"/"+(v.getMonth()+1)+"/"+v.getFullYear())}}else"1d"==t?(console.log("Reading",c),g("hour",function(t,a,e,s){e.push(a),s.push(t+"h")})):"1w"==t||"1m"==t?g("day",function(t,a,e,s,n){console.log("day",n[0].month),e.push(a),s.push(t)}):g("month",function(t,a,e,s,n){e.push(a),s.push(t)});a.data=s,a.labels=n;var p=a.realdata.reduce(function(t,a){return t+a}),x=p/a.realdata.length;a.avg=Math.round(10*x)/10,a.min=Math.round(10*Math.min.apply(Math,Object(r["a"])(a.realdata)))/10,a.max=Math.round(10*Math.max.apply(Math,Object(r["a"])(a.realdata)))/10}).finally(function(){a.axios.get("/getSensorInfo?name="+a.$options.propsData.name).then(function(t){var e=t.data.result,s=new Date(e.register),n=s.getDate()+"/"+(s.getMonth()+1)+"/"+s.getFullYear();e.register=n,a.sensor=e,a.datacol={labels:a.labels,datasets:[{label:"Avarage",backgroundColor:"rgba(0, 0, 0, 1)",borderColor:"rgba(0, 0, 0, 0.3)",data:a.data,fill:!1,stack:"1"},{label:"Maximum",backgroundColor:"rgba(255, 31, 31, 1)",borderColor:"rgba(255, 31, 31, 0.3)",data:a.realdatamax,fill:!1,stack:"1"},{label:"Minimum",backgroundColor:"rgba(31, 87, 255, 1)",borderColor:"rgba(31, 87, 255, 0.3)",data:a.realdatamin,fill:!1,stack:"1"}]};var r=a;a.axios.get("/getAllSensors").then(function(t){console.log(t),t.data.result.forEach(function(t){t.sensors.forEach(function(a){a.name==r.sensor.name&&(r.owner=t.name)})})})})})}},mounted:function(){this.getReading(this.$options.propsData.time)},components:{lineChart:c["a"]}},u=h,g=(e("bf69"),e("2877")),d=e("6544"),f=e.n(d),v=e("ce7e"),p=e("0e8f"),x=e("adda"),b=e("a722"),m=e("9910"),w=Object(g["a"])(u,s,n,!1,null,null,null);a["default"]=w.exports;f()(w,{VDivider:v["a"],VFlex:p["a"],VImg:x["a"],VLayout:b["a"],VSpacer:m["a"]})},bf69:function(t,a,e){"use strict";var s=e("dc6a"),n=e.n(s);n.a},dc6a:function(t,a,e){}}]);
//# sourceMappingURL=chunk-4a2d93ae.8e9d6bae.js.map