(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc8cfecc"],{"2ee3":function(t,e,a){var n,r;(function(i,s){if(null===i)throw new Error("Google-maps package can be used only in browser");n=s,r="function"===typeof n?n.call(e,a,e,t):n,void 0===r||(t.exports=r)})("undefined"!==typeof window?window:null,function(){"use strict";var t="3.31",e=null,a=null,n=!1,r=[],i=[],s=null,l={URL:"https://maps.googleapis.com/maps/api/js",KEY:null,LIBRARIES:[],CLIENT:null,CHANNEL:null,LANGUAGE:null,REGION:null};l.VERSION=t,l.WINDOW_CALLBACK_NAME="__google_maps_api_provider_initializator__",l._googleMockApiObject={},l.load=function(t){null===a?!0===n?t&&r.push(t):(n=!0,window[l.WINDOW_CALLBACK_NAME]=function(){o(t)},l.createLoader()):t&&t(a)},l.createLoader=function(){e=document.createElement("script"),e.type="text/javascript",e.src=l.createUrl(),document.body.appendChild(e)},l.isLoaded=function(){return null!==a},l.createUrl=function(){var t=l.URL;return t+="?callback="+l.WINDOW_CALLBACK_NAME,l.KEY&&(t+="&key="+l.KEY),l.LIBRARIES.length>0&&(t+="&libraries="+l.LIBRARIES.join(",")),l.CLIENT&&(t+="&client="+l.CLIENT),l.CHANNEL&&(t+="&channel="+l.CHANNEL),l.LANGUAGE&&(t+="&language="+l.LANGUAGE),l.REGION&&(t+="&region="+l.REGION),l.VERSION&&(t+="&v="+l.VERSION),t},l.release=function(o){var u=function(){l.KEY=null,l.LIBRARIES=[],l.CLIENT=null,l.CHANNEL=null,l.LANGUAGE=null,l.REGION=null,l.VERSION=t,a=null,n=!1,r=[],i=[],"undefined"!==typeof window.google&&delete window.google,"undefined"!==typeof window[l.WINDOW_CALLBACK_NAME]&&delete window[l.WINDOW_CALLBACK_NAME],null!==s&&(l.createLoader=s,s=null),null!==e&&(e.parentElement.removeChild(e),e=null),o&&o()};n?l.load(function(){u()}):u()},l.onLoad=function(t){i.push(t)},l.makeMock=function(){s=l.createLoader,l.createLoader=function(){window.google=l._googleMockApiObject,window[l.WINDOW_CALLBACK_NAME]()}};var o=function(t){var e;for(n=!1,null===a&&(a=window.google),e=0;e<i.length;e++)i[e](a);for(t&&t(a),e=0;e<r.length;e++)r[e](a);r=[]};return l})},"554e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("h1",{staticClass:"font-weight-light"},[t._v("\n        Sensor Name: "+t._s(t.sensor.name)+"\n        "),a("br")]),a("h3",[t._v("Registered on: "+t._s(t.sensor.register))]),a("h3",[t._v("Description: "+t._s(t.sensor.description))]),a("h3",[t._v("Unit description: "+t._s(t.sensor.unitdesd))]),a("v-divider"),a("br"),t.hasRead?a("v-flex",{attrs:{xs12:""}},[a("h3",[t._v("Min reading:"+t._s(t.min))]),a("h3",[t._v("Max reading:"+t._s(t.max))]),a("h3",[t._v("Average: "+t._s(t.avg))])]):a("v-flex",{attrs:{xs12:""}},[a("h3",[t._v("The sensor has no reading for the time")])]),a("v-btn",{attrs:{flat:""},on:{click:function(e){return t.closeSite()}}},[a("span",[t._v("Close site")])]),a("v-btn",{attrs:{flat:""},on:{click:function(e){return t.openballon()}}},[a("span",[t._v("Open ballon")])]),a("v-btn",{attrs:{flat:""},on:{click:function(e){return t.closeBallon()}}},[a("span",[t._v("Close Ballon")])])],1),a("v-flex",{attrs:{xs6:""}},[a("lineChart",{key:t.redender,attrs:{id:"chart","chart-data":t.datacol}}),a("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[a("v-btn-toggle",{attrs:{"justify-center":""},model:{value:t.toggle_exclusive,callback:function(e){t.toggle_exclusive=e},expression:"toggle_exclusive"}},[a("v-btn",{attrs:{flat:""},on:{click:function(e){return t.getReading("setup")}}},[a("span",[t._v("all")])]),a("v-btn",{attrs:{flat:""},on:{click:function(e){return t.getReading("1y")}}},[a("span",[t._v("1y")])]),a("v-btn",{attrs:{flat:""},on:{click:function(e){return t.getReading("1m")}}},[a("span",[t._v("1m")])]),a("v-btn",{attrs:{flat:""},on:{click:function(e){return t.getReading("1w")}}},[a("span",[t._v("1w")])]),a("v-btn",{attrs:{flat:""},on:{click:function(e){return t.getReading("1d")}}},[a("span",[t._v("1d")])])],1)],1)],1)],1)],1)},r=[],i=a("75fc"),s=a("768b"),l=(a("ffc1"),a("456d"),a("55dd"),a("ac6a"),a("28a5"),a("bd86")),o=a("cebc"),u=(a("7f7f"),a("96cf"),a("3b8d")),c=a("4a88"),d=a("6b40"),h={data:function(){return{sensor:null,datacol:{},data:null,labels:null,max:null,min:null,avg:null,hasRead:!1,redender:0,realdata:[],realdatamin:[],realdatamax:[],datamin:[],datamax:[]}},props:{name:String},methods:{getReading:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var a,n,r,u,c,d,h,p,g,f,m,v,b,y,_,x,w,E=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.realdata=[],this.realdatamin=[],this.realdatamax=[],this.datamin=[],this.datamax=[],a="/readSensor?name="+this.$options.propsData.name,"setup"!=e&&(a+="&datespan="+e),a=encodeURI(a),t.next=10,this.axios.get("/getSensorInfo?name="+this.$options.propsData.name);case 10:if(n=t.sent,console.log(n),r=[],u=[],console.log(!n.data.result.mock),n.data.result.mock){t.next=23;break}return t.next=18,this.axios.get(a);case 18:d=t.sent,console.log("data result",d),c=d.data.result,t.next=28;break;case 23:return t.next=25,this.generatedatapack(e);case 25:c=t.sent,this.$store.dispatch("setMockData",c),console.log("Store",this.$store);case 28:if(console.log("Readings",c),h=0,p=function(t){return function(e){return e.reduce(function(e,a){return Object(o["a"])({},e,Object(l["a"])({},a[t],(e[a[t]]||[]).concat(a)))},{})}},g=function(t,a){for(var n=p(t),l=n(c),o=function(t,e){var a=new Date,n=new Date,r=t.split("/"),i=e.split("/");return a.setDate(r[0]),a.setMonth(r[1]-1),n.setDate(i[0]),n.setMonth(i[1]-1),a-n},d=0,h=Object.entries(l);d<h.length;d++){var g=Object(s["a"])(h[d],2),f=g[0],m=g[1],v=[];m.forEach(function(t){v.push(parseFloat(t.value))});var b=v.reduce(function(t,e){return t+e});b/=m.length,E.realdata.push(b),E.realdatamin.push(Math.min.apply(Math,Object(i["a"])(v))),E.realdatamax.push(Math.max.apply(Math,Object(i["a"])(v)))}if("1d"==e)for(var y=0;y<24;y++)l.hasOwnProperty(y)||(l[y]=[{value:0}]);if("1w"==e){for(var _=0;_<7;_++){var x=new Date;x.setDate(x.getDate()-_),l.hasOwnProperty(x.getDate()+"/"+(x.getMonth()+1))||(l[x.getDate()+"/"+(x.getMonth()+1)]=[{value:0}])}var w=l;l={},Object.keys(w).sort(o).forEach(function(t){l[t]=w[t]})}if("1m"==e){for(var A=0;A<30;A++){x=new Date;x.setDate(x.getDate()-A),l.hasOwnProperty(x.getDate()+"/"+(x.getMonth()+1))||(l[x.getDate()+"/"+(x.getMonth()+1)]=[{value:0}])}w=l;l={},Object.keys(w).sort(o).forEach(function(t){l[t]=w[t]})}if("1y"==e)for(var V=0;V<12;V++)l.hasOwnProperty(V+1)||(l[V+1]=[{value:0}]);for(var k=0,M=Object.entries(l);k<M.length;k++){var L=Object(s["a"])(M[k],2);f=L[0],m=L[1],v=[];m.forEach(function(t){v.push(parseFloat(t.value))});b=v.reduce(function(t,e){return t+e});b/=m.length,a(f,b,r,u,m),E.datamin.push(Math.min.apply(Math,Object(i["a"])(v))),E.datamax.push(Math.max.apply(Math,Object(i["a"])(v)))}},c.forEach(function(t){var e=new Date(t.date);t.day=e.getDate()+"/"+(e.getMonth()+1),t.month=e.getMonth()+1,t.year=e.getFullYear(),t.hour=e.getHours()-3,t.minute=e.getMinutes(),t.second=e.getSeconds()}),0==c.length?this.hasRead=!1:this.hasRead=!0,"setup"==e)for(c.reverse(),f=c.length;h<10&&0!=f;f--,h++)m=c[f-1],r.push(parseFloat(m.value)),this.realdata.push(parseFloat(m.value)),v=new Date(m.date),u.push(v.getDate()+"/"+(v.getMonth()+1)+"/"+v.getFullYear());else"1d"==e?g("hour",function(t,e,a,n){a.push(e),n.push(t+"h")}):g("1w"==e||"1m"==e?"day":"month",function(t,e,a,n,r){a.push(e),n.push(t)});return this.data=r,this.labels=u,console.log("Real data",this.realdata),b=0!=this.realdata.length?this.realdata.reduce(function(t,e){return t+e}):0,y=b/this.realdata.length,this.avg=Math.round(10*y)/10,this.min=Math.round(10*Math.min.apply(Math,Object(i["a"])(this.realdatamin)))/10,this.max=Math.round(10*Math.max.apply(Math,Object(i["a"])(this.realdata)))/10,t.next=45,this.axios.get("/getSensorInfo?name="+this.$options.propsData.name);case 45:d=t.sent,_=d.data.result,v=new Date(_.register),x=v.getDate()+"/"+(v.getMonth()+1)+"/"+v.getFullYear(),_.register=x,this.sensor=_,this.datacol={labels:this.labels,datasets:[{label:"Avarage",backgroundColor:"rgba(0, 0, 0, 1)",borderColor:"rgba(0, 0, 0, 0.3)",data:this.data,fill:!1,stack:"1"},{label:"Maximum",backgroundColor:"rgba(255, 31, 31, 1)",borderColor:"rgba(255, 31, 31, 0.3)",data:this.datamax,fill:!1,stack:"1"},{label:"Minimum",backgroundColor:"rgba(31, 87, 255, 1)",borderColor:"rgba(31, 87, 255, 0.3)",data:this.datamin,fill:!1,stack:"1"}]},this.redender+=1,this.axios.post("/movelg",{lat:_.y,lng:_.x,host:"192.168.0.155",username:"lg",password:"lq"}).then(function(){}).catch(function(t){}).finally(function(){}),w=Object({VUE_APP_backEnd:"",VUE_APP_ericbe:"http://192.168.0.155:8888",VUE_APP_masterIp:"192.168.0.155",VUE_APP_slaveIp:"192.168.0.141",VUE_APP_key:"lq",VUE_APP_user:"lg",VUE_APP_localip:"http://192.168.0.191:8888",NODE_ENV:"production",BASE_URL:"/"}),this.axios.post(w.VUE_APP_backEnd+"/opensite",{serverurl:encodeURI("/front/"+this.sensor.name+"/lgDetail/"+e),lgurl:w.VUE_APP_slaveIp,lguser:w.VUE_APP_user,lgkey:w.VUE_APP_key}).then(function(){}).catch(function(t){});case 56:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),closeSite:function(){this.axios.post("/closesite",{lgurl:"192.168.0.141",lguser:"lg",lgkey:"lq"}).then(function(){})},closeBallon:function(){this.axios.get("http://192.168.0.155:8888/kml/manage/balloon/"+this.sensor.sensorid+"/0")},openballon:function(){this.axios.get("http://192.168.0.155:8888/kml/manage/balloon/"+this.sensor.sensorid+"/1")},generatedatapack:function(t){return new Promise(function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(a,n){var r,i,s,l,o,u,c,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=[],i=new Date,s=new Date,l=0;case 4:if(!(l<12)){e.next=32;break}if(0!=l&&i.setMonth(i.getMonth()-1),"1d"!=t&&"1m"!=t&&"1w"!=t||(l=12),i.getFullYear()!=s.getFullYear()){e.next=29;break}o=new Date(i.getFullYear(),i.getMonth(),0).getDate(),"1w"==t&&(o=7),u=0;case 11:if(!(u<o)){e.next=29;break}0!=u&&(i.setDate(i.getDate()-1),i.setHours(0)),console.log("Date",i.getDate()),c=void 0,c=s.getHours()+1,"1d"==t&&(u=100),d=0;case 18:if(!(d<c)){e.next=26;break}return i.setHours(d+3),e.next=22,console.log("date",i.toISOString());case 22:r.push({date:i.toISOString(),value:20*Math.random()+10});case 23:d++,e.next=18;break;case 26:u++,e.next=11;break;case 29:l++,e.next=4;break;case 32:console.log("generated",r),a(r);case 34:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},generatedata:function(t){}},mounted:function(){this.getReading("1d")},components:{lineChart:c["a"],gmap:d["a"]}},p=h,g=a("2877"),f=a("6544"),m=a.n(f),v=a("8336"),b=(a("934c"),a("58dbb"),a("2b0e"));function y(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"change";return b["default"].extend({name:"proxyable",model:{prop:t,event:e},props:y({},t,{required:!1}),data:function(){return{internalLazyValue:this[t]}},computed:{internalValue:{get:function(){return this.internalLazyValue},set:function(t){t!==this.internalLazyValue&&(this.internalLazyValue=t,this.$emit(e,t))}}},watch:y({},t,function(t){this.internalLazyValue=t})})}var x=_(),w=x,E=a("6a18"),A=a("58df"),V=a("d9bd"),k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},M=Object(A["a"])(w,E["a"]).extend({name:"base-item-group",props:{activeClass:{type:String,default:"v-item--active"},mandatory:Boolean,max:{type:[Number,String],default:null},multiple:Boolean},data:function(){return{internalLazyValue:void 0!==this.value?this.value:this.multiple?[]:void 0,items:[]}},computed:{classes:function(){return k({},this.themeClasses)},selectedItems:function(){var t=this;return this.items.filter(function(e,a){return t.toggleMethod(t.getValue(e,a))})},selectedValues:function(){return Array.isArray(this.internalValue)?this.internalValue:[this.internalValue]},toggleMethod:function(){var t=this;if(!this.multiple)return function(e){return t.internalValue===e};var e=this.internalValue;return Array.isArray(e)?function(t){return e.includes(t)}:function(){return!1}}},watch:{internalValue:function(){this.$nextTick(this.updateItemsState)}},created:function(){this.multiple&&!Array.isArray(this.internalValue)&&Object(V["c"])("Model must be bound to an array if the multiple property is true.",this)},methods:{getValue:function(t,e){return null==t.value||""===t.value?e:t.value},onClick:function(t,e){this.updateInternalValue(this.getValue(t,e))},register:function(t){var e=this,a=this.items.push(t)-1;t.$on("change",function(){return e.onClick(t,a)}),this.mandatory&&null==this.internalLazyValue&&this.updateMandatory(),this.updateItem(t,a)},unregister:function(t){if(!this._isDestroyed){var e=this.items.indexOf(t),a=this.getValue(t,e);this.items.splice(e,1);var n=this.selectedValues.indexOf(a);if(!(n<0)){if(!this.mandatory)return this.updateInternalValue(a);this.multiple&&Array.isArray(this.internalValue)?this.internalValue=this.internalValue.filter(function(t){return t!==a}):this.internalValue=void 0,this.selectedItems.length||this.updateMandatory(!0)}}},updateItem:function(t,e){var a=this.getValue(t,e);t.isActive=this.toggleMethod(a)},updateItemsState:function(){if(this.mandatory&&!this.selectedItems.length)return this.updateMandatory();this.items.forEach(this.updateItem)},updateInternalValue:function(t){this.multiple?this.updateMultiple(t):this.updateSingle(t)},updateMandatory:function(t){if(this.items.length){var e=t?this.items.length-1:0;this.updateInternalValue(this.getValue(this.items[e],e))}},updateMultiple:function(t){var e=Array.isArray(this.internalValue)?this.internalValue:[],a=e.slice(),n=a.findIndex(function(e){return e===t});this.mandatory&&n>-1&&a.length-1<1||null!=this.max&&n<0&&a.length+1>this.max||(n>-1?a.splice(n,1):a.push(t),this.internalValue=a)},updateSingle:function(t){var e=t===this.internalValue;this.mandatory&&e||(this.internalValue=e?void 0:t)}},render:function(t){return t("div",{staticClass:"v-item-group",class:this.classes},this.$slots.default)}}),L=(M.extend({name:"v-item-group",provide:function(){return{itemGroup:this}}}),M.extend({name:"button-group",provide:function(){return{btnToggle:this}},props:{activeClass:{type:String,default:"v-btn--active"}},computed:{classes:function(){return M.options.computed.classes.call(this)}}})),I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},O=L.extend({name:"v-btn-toggle",props:{activeClass:{type:String,default:"v-btn--active"}},computed:{classes:function(){return I({},L.options.computed.classes.call(this),{"v-btn-toggle":!0,"v-btn-toggle--only-child":1===this.selectedItems.length,"v-btn-toggle--selected":this.selectedItems.length>0})}}}),D=a("a523"),C=a("ce7e6"),N=a("0e8f"),R=a("a722"),S=Object(g["a"])(p,n,r,!1,null,null,null);e["default"]=S.exports;m()(S,{VBtn:v["a"],VBtnToggle:O,VContainer:D["a"],VDivider:C["a"],VFlex:N["a"],VLayout:R["a"]})},"58dbb":function(t,e,a){},"6b40":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("div",{attrs:{id:"map"}})])],1)],1)},r=[],i=(a("c5f6"),a("2ee3")),s=a.n(i);s.a.KEY="AIzaSyCX0EVea8pRdiSdso5s78fahE7VTm0YtaA",s.a.LIBRARIES=["places"];var l={data:function(){return{latLng:"",localizationName:null,markers:[]}},props:{lat:Number,lng:Number,editable:Boolean,setMark:Boolean,img:String},watch:{latLng:function(){}},mounted:function(){var t,e=this;s.a.load(function(a){var n=new a.maps.Map(document.getElementById("map"),{zoom:16,center:{lat:e.$options.propsData.lat,lng:e.$options.propsData.lng}});e.$options.propsData.editable?(n.addListener("click",function(r){null!=t&&t.setMap(null),t=new a.maps.Marker({position:r.latLng,map:n}),e.latLng=r.latLng,e.$store.dispatch("setCoord",r.latLng)}),e.$options.propsData.setMark&&(t=new a.maps.Marker({position:{lat:e.$options.propsData.lat,lng:e.$options.propsData.lng},map:n}))):t=new a.maps.Marker({position:{lat:e.$options.propsData.lat,lng:e.$options.propsData.lng},map:n})})}},o=l,u=(a("bdef"),a("2877")),c=a("6544"),d=a.n(c),h=a("a523"),p=a("0e8f"),g=a("a722"),f=Object(u["a"])(o,n,r,!1,null,null,null);e["a"]=f.exports;d()(f,{VContainer:h["a"],VFlex:p["a"],VLayout:g["a"]})},"6ba5":function(t,e,a){},"934c":function(t,e,a){},bdef:function(t,e,a){"use strict";var n=a("6ba5"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-dc8cfecc.8e2cc26a.js.map